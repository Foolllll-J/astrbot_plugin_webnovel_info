<div align="center">

# 📚 网文搜索助手

<i>📖 网文聚合搜索与书架管理工具</i>

![License](https://img.shields.io/badge/license-AGPL--3.0-green?style=flat-square)
![Python](https://img.shields.io/badge/python-3.10+-blue?style=flat-square&logo=python&logoColor=white)
![AstrBot](https://img.shields.io/badge/framework-AstrBot-ff6b6b?style=flat-square)

</div>

## ✨ 简介

一款为 [**AstrBot**](https://astrbot.app) 设计的跨平台网文搜索与详情查询插件。它能单独查询**起点**、**番茄**和**刺猬猫**等平台的小说信息，也支持对多平台进行**聚合搜索**，同时具有**书架管理**功能。

---

## 🚀 特性

* ​**跨平台综合搜索**​: 一个指令同步检索起点、番茄与刺猬猫，结果按质量交叉混排，解决单一平台资源不足或噪音过多的问题。
* ​**丰富元数据展示**​: 包含封面图、作者、类型、字数、状态、标签、评分、排行、实时热度及最近更新章节。
* ​**显示模式切换**​: 提供“详细”和“简洁”两种模式。简洁模式下将隐藏最近更新、评分、热度等干扰项，仅保留核心简介。
* ​**章节试读功能**​: 支持在书籍详情中直接附带第一章的正文预览，享受沉浸式搜书体验。
* **个人书架管理**: 支持将喜欢的书籍加入书架，随时查看藏书，支持翻页查看详情。

---

## 🚀 安装

1. ​**下载本仓库**​。
2. 将整个 `astrbot_plugin_webnovel_info` 文件夹放入 `astrbot` 的 `plugins` 目录中。
3. ​**安装依赖库**​：
   ```bash
   pip install lxml aiohttp
   ```
4. 重启 AstrBot。

---

## ⚙️ 配置

首次加载后，请在 AstrBot 后台 -> 插件 页面找到本插件进行设置。

| 配置项 | 说明 | 默认值 |
| :--- | :--- | :--- |
| `display_mode` | 详情显示样式，可选“详细”或“简洁”。简洁模式隐藏更新与动态属性。 | `详细` |
| `enable_trial` | 是否在详情页末尾开启第一章试读功能（仅限支持的平台）。 | `false` |
| `platform_weights` | 平台排序优先级。例如`1 2 3`表示起点第一、番茄第二、刺猬猫第三；`0`表示综合搜索中禁用。 | `1 2 3` |
| `tomato_api_base` | 番茄小说 API 地址。用于番茄小说搜索，不填则不启用。 | - |

---

## 💡 使用方法

### 1. 综合搜索

核心搜索指令，支持聚合多个平台的结果。

* **发起搜索**: `/搜书 <书名/作者名>` 或别名 `/ss <书名>`。
* **查看详情**: 搜索后直接发送 `/ss <序号>`。机器人会智能识别来源平台并展示完整信息。
* **翻页查询**: `/ss 下一页`。如果当前缓存的结果已耗尽，插件会自动触发深度采样补货。

### 2. 单平台搜索

针对特定平台的搜索指令。

* **起点查询**: `/起点 <书名/作者名>` 或别名 `/qd <书名/作者名>`。
* **番茄查询**: `/番茄 <书名/作者名>` 或别名 `/fq <书名/作者名>`。
* **刺猬猫查询**: `/刺猬猫 <书名/作者名>` 或别名 `/cwm <书名/作者名>`。
* **单平台详情**: `/qd <序号>` 、 `/fq <序号>` 或 `/cwm <序号>`。

### 3. 书架管理

管理你的私人书架。

* **查看书架**: `/查看书架` 或别名 `/书架`。
* **书架详情**: `/书架 <序号>`。支持通过 `/书架 下一页/上一页` 翻页。
* **添加书籍**:
  * `/添加书架 <序号>` 或别名 `/加书架 <序号>`（添加当前搜索结果中的书籍）。
  * 直接发送 `/加书架`（将最近一次查看详情的书籍加入书架）。
* **移除书籍**:
  * `/移除书架 <序号>` 或别名 `/删书 <序号>`（移除书架中对应序号的书籍）。
  * 直接发送 `/删书`（从书架中移除最近一次查看详情的书籍）。

---

## 📝 更新日志

<details>
<summary>点击展开查看更新日志</summary>

* **v1.0**
  - 新增书架模块。
  - 新增 `/三江` 指令。
* **v0.2**
  * 新增支持番茄小说平台。
* **v0.1**
  * 插件首次发布。
  * 支持起点、刺猬猫两个平台。

</details>

---

## ❤️ 支持

* [AstrBot 帮助文档](https://astrbot.app)
* 如果您在使用中遇到错误或有改进建议，欢迎提交 [Issue](https://github.com/Foolllll-J/astrbot_plugin_webnovel_info/issues)。

---

<div align="center">

**如果本插件对你有帮助，欢迎点个 ⭐ Star 支持一下！**

</div>
