# 📚 Webnovel Info - 网文信息搜索助手

![License](https://img.shields.io/badge/license-AGPL--3.0-green?style=flat-square)
![Python](https://img.shields.io/badge/python-3.10+-blue?style=flat-square&logo=python&logoColor=white)
![AstrBot](https://img.shields.io/badge/framework-AstrBot-ff6b6b?style=flat-square)

一款为 [AstrBot](https://astrbot.app) 设计的跨平台网文搜索与详情查询插件。它能单独查询起点和刺猬猫等平台的小说信息，也支持对多平台进行聚合搜索。

## ✨ 功能

* ​**跨平台综合搜索**​: 一个指令同步检索起点与刺猬猫，结果按质量交叉混排，解决单一平台资源不足或噪音过多的问题。
* ​**丰富元数据展示**​: 包含封面图、作者、类型、字数、状态、标签、评分、排行、实时热度及最近更新章节。
* ​**显示模式切换**​: 提供“详细”和“简洁”两种模式。简洁模式下将隐藏最近更新、评分、热度等干扰项，仅保留核心简介。
* ​**章节试读功能**​: 支持在书籍详情中直接附带第一章的正文预览，享受沉浸式搜书体验。

## 🚀 安装

1. ​**下载本仓库**​。
2. 将整个 `astrbot_plugin_webnovel_info` 文件夹放入 `astrbot` 的 `plugins` 目录中。
3. ​**安装依赖库**​：
   ```
   pip install lxml aiohttp
   ```
4. 重启 AstrBot。

## ⚙️ 配置

首次加载后，请在 AstrBot 后台 -> 插件 页面找到本插件进行设置。

| 配置项                 | 说明                                                                                     | 默认值      |
| ------------------------ | ------------------------------------------------------------------------------------------ | ------------- |
| `display_mode`     | 详情显示样式，可选“详细”或“简洁”。简洁模式隐藏更新与动态属性。                       | `详细`  |
| `enable_trial`     | 是否在详情页末尾开启第一章试读功能（仅限支持的平台）。                                   | `false` |
| `platform_weights` | 平台排序优先级。例如`1 2`表示起点第一、刺猬猫第二；`0`表示综合搜索中禁用该平台。 | `1 2`   |

## 💡 使用

### 1. 综合搜索

* ​**发起搜索**​: `/搜书 <书名/作者名>` 或使用别名 `/ss <书名>`。
* ​**查看详情**​: 搜索后直接发送 `/ss <序号>`。机器人会智能识别来源平台并展示完整信息，无需手动切换指令。
* ​**翻页查询**​: `/ss 下一页`。如果当前缓存的高质量结果已耗尽，插件会自动触发深度采样补货。

### 2. 单平台搜索

* ​**起点查询**​: `/起点 <书名/作者名>`或使用别名 `/qd  <书名/作者名>`。
* ​**刺猬猫查询**​: `/刺猬猫 <书名/作者名>`或使用别名 `/cwm  <书名/作者名>`。
* ​**单平台详情**​: `/qd <序号>` 或 `/cwm <序号>`。

## 📝 版本记录

* **v0.1**
  * 插件首次发布。
  * 支持起点、刺猬猫两个平台。


## ❤️ 支持

* [AstrBot 帮助文档](https://astrbot.app)
* 如果您在使用中遇到错误或有算法改进建议，欢迎提交 [Issue](https://github.com/Foolllll-J/astrbot_plugin_webnovel_info/issues )。

